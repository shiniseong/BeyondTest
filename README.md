# BeyondTest Project

## 프로젝트 개요
* 이 프로젝트는 gRPC 기반의 마이크로서비스 아키텍처를 구현한 연습용 예제 프로젝트입니다.
* 이 프로젝트는 사용자 관리, 처방 관리, 알림 서비스로 구성되어 있습니다. 각 서비스는 도메인 주도 설계 원칙에 따라 구성되어 있습니다.
* 이 프로젝트는 헥사고날 아키텍처를 기반으로 한 마이크로서비스 아키텍처를 구현하고 있습니다.

## 프로젝트 구조

```
beyondtest/
├── shared/
│   └── utils/                     # 공통 유틸리티 기능
└── services/                      # 마이크로서비스 모음
    ├── user-service/              # 사용자 관리 서비스
    │   ├── domain/                # 도메인 모델 및 규칙
    │   ├── application/           # 유스케이스 및 포트 정의
    │   ├── bootstrap/             # 애플리케이션 진입점 및 구성, DI 등 정의
    │   └── adapter/               # 어댑터 구현
    │       ├── inbound/           # 인바운드 어댑터
    │       │   ├── rest/          # REST API 인터페이스
    │       │   └── grpc/          # gRPC 인터페이스
    │       └── outbound/          # 아웃바운드 어댑터
    │           ├── repository/    # 데이터 저장소 어댑터
    │           └── grpc/          # 외부 서비스 gRPC 클라이언트
    │
    ├── prescription-service/      # 처방 관리 서비스
    │   ├── domain/                # 도메인 모델 및 규칙
    │   ├── application/           # 유스케이스 및 포트 정의
    │   ├── bootstrap/             # 애플리케이션 진입점 및 구성, DI 등 정의
    │   └── adapter/               # 어댑터 구현
    │       ├── inbound/           # 인바운드 어댑터
    │       │   ├── rest/          # REST API 인터페이스
    │       │   └── grpc/          # gRPC 인터페이스
    │       └── outbound/          # 아웃바운드 어댑터
    │           ├── repository/    # 데이터 저장소 어댑터
    │           └── grpc/          # 외부 서비스 gRPC 클라이언트
    │
    └── notification-service/      # 알림 서비스
        ├── domain/                # 도메인 모델 및 규칙
        ├── application/           # 유스케이스 및 포트 정의
        ├── bootstrap/             # 애플리케이션 진입점 및 구성, DI 등 정의
        └── adapter/               # 어댑터 구현
            ├── inbound/           # 인바운드 어댑터
            │   ├── rest/          # REST API 인터페이스
            │   └── grpc/          # gRPC 인터페이스
            └── outbound/          # 아웃바운드 어댑터
                ├── repository/    # 데이터 저장소 어댑터
                └── grpc/          # 외부 서비스 gRPC 클라이언트
```

## 아키텍처 설명

### 헥사고날 아키텍처

이 프로젝트는 헥사고날 아키텍처(Hexagonal Architecture, 또는 포트와 어댑터 아키텍처)를 적용하여 다음과 같은 이점을 제공합니다.

1. **관심사 분리**: 도메인 로직과 외부 시스템 인터페이스 분리
2. **테스트 용이성**: 외부 의존성 없이 핵심 비즈니스 로직 테스트 가능
3. **확장성**: 새로운 인터페이스나 외부 서비스 쉽게 추가 가능
4. **유지보수성**: 기술 스택 변경에 대한 영향 최소화

### 계층 구조

각 서비스는 다음 계층으로 구성됩니다.

#### 1. 도메인 계층 (Domain Layer)
- 비즈니스 엔티티 및 값 객체
- 도메인 규칙 및 비즈니스 로직
- 도메인 이벤트 및 예외

#### 2. 애플리케이션 계층 (Application Layer)
- 유스케이스 구현
- 포트 정의 (인바운드/아웃바운드)

#### 3. 어댑터 계층 (Adapter Layer)
- **인바운드 어댑터**: 외부에서 애플리케이션으로의 요청 처리
    - REST 컨트롤러
    - gRPC 서비스
- **아웃바운드 어댑터**: 애플리케이션에서 외부 시스템으로의 요청 처리
    - 데이터베이스 리포지토리
    - 외부 서비스 클라이언트

#### 4. 부트스트랩 계층 (Bootstrap Layer)
- 애플리케이션 진입점 (메인 클래스)
- 의존성 주입 및 빈 구성
- 환경 설정 및 프로퍼티 관리
- 외부 프레임워크 통합

### 서비스 간 통신

서비스 간 통신은 주로 gRPC를 통해 이루어집니다. 이는 다음과 같은 이점을 제공합니다.
- 강력한 타입 안전성
- 높은 성능과 적은 오버헤드
- 양방향 스트리밍 지원
- 프로토콜 버퍼를 통한 명확한 계약 정의

## 개발 가이드

### 빌드 및 실행

이 프로젝트는 Gradle을 사용하여 빌드합니다.

```bash
# 전체 프로젝트 빌드
./gradlew build

# 특정 서비스만 빌드
./gradlew :services:user-service:build
```

### 아키텍처 가이드라인

개발 시 다음 가이드라인을 참고하세요.

1. **도메인 중심 설계**: 도메인 모델을 중심으로 설계하고, 비즈니스 로직은 도메인 계층에 구현합니다. 풍부한 도메인 모델을 구축하세요.
2. **의존성 규칙 준수**: 내부 계층이 외부 계층에 의존해서는 안 됩니다 (도메인 → 애플리케이션 → 어댑터).
3. **포트 인터페이스 활용**: 모든 외부 시스템과의 상호작용은 포트 인터페이스를 통해 이루어져야 합니다.
4. **테스트 주도 개발**: 각 계층과 컴포넌트에 대한 단위 테스트를 작성합니다.

## 기술 스택

- **언어**: Kotlin
- **빌드 도구**: Gradle
- **테스트** : Kotest
- **프레임워크**: Spring Boot
- **통신**: gRPC, REST API
- **데이터베이스**: MySQL
